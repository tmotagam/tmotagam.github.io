import{d as p}from"./debounce.DT8DhbJn.js";import{o as l}from"./DOMUtils.DvLWu1kG.js";import{l as u,d as r}from"./event.C5jlCmtE.js";import{c as f,m as w,p as g}from"./popover.dS81GMjB.js";const m=()=>{const d=document.querySelectorAll('[data-id^="w-select"]');let n=!1;l(document,"keydown",a=>{a.key==="Tab"&&(n=!0)}),l(document,"mousedown",()=>n=!1),Array.from(d).forEach(a=>{const t=a,s=t.dataset.id.split("w-select-")[1],c=t.dataset.position;if(c==="modal")w({trigger:`[data-id="${t.dataset.id}"]`,modal:`[data-id="w-options-${s}"]`,onOpen:({modal:o})=>{const e=o.querySelector("input");e&&e.focus()},onClose(o){r("selectOnClose",o)}});else{const o=p(()=>{const{width:e}=t.getBoundingClientRect(),i=document.querySelector(`[data-id="w-options-${s}"]`);i&&(i.style.width=`${e}px`)});new ResizeObserver(()=>o()).observe(document.body),g({trigger:`[data-id="${t.dataset.id}"]`,popover:`[data-id="w-options-${s}"]`,position:c||"bottom",onOpen({popover:e}){const i=e.querySelector("input");i?i.focus():e.focus()},onClose(e){r("selectOnClose",e)}})}l(t,"focus",o=>{n&&o.currentTarget.click()})})};u("listOnSelect",d=>{const{name:n,list:a}=d,t=a.closest("dialog");if(!t)return;const s=t.dataset.id,c=s.split("w-options-")[1],o=`[data-id="w-select-${c}"]`,e=document.querySelector(o);f(`[data-id="${s}"]`),e.dataset.noUpdate||(e.value=n),r("selectOnChange",{...d,select:c})});l(document,"astro:after-swap",m);m();
