import{d as T}from"./debounce.DT8DhbJn.js";const v=(r=!0)=>{const c=window.innerWidth-document.body.clientWidth;r?(document.body.style.paddingRight=`${c}px`,document.body.style.overflow="hidden"):setTimeout(()=>{document.body.style.paddingRight="",document.body.style.overflow=""},300)},P=r=>{const{trigger:c,modal:a,onOpen:h,onClose:m}=typeof r=="string"?{}:r,u=typeof r=="string"?r:a,l=document.querySelector(c),o=document.querySelector(u);if(o){const n=o.dataset.close?.split(","),e={icon(){const s=o.querySelector('[data-id="close"]'),d=()=>{o.dataset.show="",v(!1),m?.({trigger:l,modal:o})};return{add:()=>s?.addEventListener("click",d),remove:()=>s?.removeEventListener("click",d)}},esc(){const s=d=>{o.dataset.show&&d.key==="Escape"&&(o.dataset.show="",v(!1),m?.({trigger:l,modal:o}))};return{add:()=>document.addEventListener("keydown",s),remove:()=>document.removeEventListener("keydown",s)}},overlay(){const s=o.nextElementSibling,d=()=>{o.dataset.show="",v(!1),m?.({trigger:l,modal:o})};return{add:()=>s?.addEventListener("click",d),remove:()=>s?.removeEventListener("click",d)}}},p=()=>{o.dataset.show="true",v(),h?.({trigger:l,modal:o})};return l?.addEventListener("click",p),n?.forEach(s=>{e[s]().add()}),{open(){p()},remove(){l?.removeEventListener("click",p),n?.forEach(s=>{e[s]().remove()})}}}},x=r=>{const c=document.querySelector(r);c&&(c.dataset.show="",v(!1))},Y=({trigger:r,popover:c,position:a,offset:h=10,closeOnBlur:m=!0,closeOnEsc:u=!0,onOpen:l,onClose:o})=>{const n=document.querySelector(r),e=document.querySelector(c);if(n&&e){document.body.appendChild(e),a&&(e.dataset.position=a.split("-")[0]);const p=()=>{const t=n.getBoundingClientRect(),i=e.getBoundingClientRect(),w=t.top+window.scrollY-i.height-h,f=t.top+window.scrollY+t.height+h,g=t.left-i.width-h,y=t.left+t.width+h,E=t.left-(i.width-t.width)/2,k=t.left-(i.width-t.width),L=t.top+window.scrollY-(i.height-t.height)/2,S=t.top+window.scrollY,O=t.top+window.scrollY-(i.height-t.height),q={"top-start":{top:w,left:t.left},top:{top:w,left:E},"top-end":{top:w,left:k},"left-start":{top:S,left:g},left:{top:L,left:g},"left-end":{top:O,left:g},"right-start":{top:S,left:y},right:{top:L,left:y},"right-end":{top:O,left:y},"bottom-start":{top:f,left:t.left},bottom:{top:f,left:E},"bottom-end":{top:f,left:k}},{top:M,left:R}=q[a]||q.bottom;e.style.top=`${M}px`,e.style.left=`${R}px`,setTimeout(()=>{e.dataset.show=e.dataset.show==="true"?"":"true"},0),setTimeout(()=>{e.dataset.show||e.removeAttribute("data-show")},300),l?.({trigger:n,popover:e,position:a})},s=t=>{const i=t.target;!e.contains(i)&&!n.contains(i)&&e.dataset.show&&(e.dataset.show="",o?.({trigger:n,popover:e,position:a})),setTimeout(()=>{e.dataset.show||e.removeAttribute("data-show")},300)},d=t=>{t.key==="Escape"&&e.dataset.show&&(e.dataset.show="",o?.({trigger:n,popover:e,position:a}),setTimeout(()=>{e.removeAttribute("data-show")},300))},C=T(()=>{e.dataset.show="",setTimeout(()=>{e.dataset.show||e.removeAttribute("data-show")},300)}),b=new ResizeObserver(()=>{e.dataset.show&&C()});return n.addEventListener("click",p),b.observe(document.body),m&&document.addEventListener("click",s),u&&document.addEventListener("keydown",d),{remove(){n.removeEventListener("click",p),b.disconnect(),m&&document.removeEventListener("click",s),u&&document.removeEventListener("keydown",d)}}}},A=x;export{A as c,P as m,Y as p};
