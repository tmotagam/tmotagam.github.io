import{d as h}from"./debounce.DT8DhbJn.js";import{l as b}from"./event.C5jlCmtE.js";const p=()=>{const e=Array.from(document.querySelectorAll('[data-id="w-carousel"]')),o=a=>{const t=a.target;if(!t.dataset.paginated){const d=t.scrollLeft,s=t.children[0].clientWidth,c=Math.round(d/s)+1,l=t.children[0],i=t.parentElement?.querySelector('[data-id="w-pagination"]'),u=Number(i.dataset.currentPage),g=Math.abs(u-c);let r=u>c?i.querySelector('[data-page="prev"]'):i.querySelector('[data-page="next"]');r||(r=i.querySelector(`[data-page="${c}"]`));for(let n=0;n<g;n++)r.click();Array.from(l.children).forEach(n=>{n.removeAttribute("data-active")});const m=l.children[c-1];m.dataset.active="true"}};e.forEach(a=>{const t=a,d=t.dataset.debounce?Number(t.dataset.debounce):20;a.addEventListener("scroll",h(s=>{o(s)},d))})};b("paginate",e=>{const o=e.target,a=o.closest("section").querySelector('[data-id="w-carousel"] ul');if(!a)return;const t=o.closest("section").querySelector(".w-carousel-progress"),d=100/(Number(o.dataset.totalPages)-1),s=Number(a.dataset.visibleItems)||1,c=a.children.length,l=Array.from({length:Math.ceil(c/s)},(r,m)=>Array.from({length:s},(n,f)=>m*s+f).filter(n=>n<c)),i=e.direction==="prev"?l[e.page-1][0]:l[e.page-1][l[e.page-1].length-1],u=a.children[i],g=e.target.parentElement.querySelector("span");if(Array.from(a.children).forEach(r=>{r.removeAttribute("data-active")}),g?.dataset.text&&(g.innerText=g.dataset.text.replace("{0}",e.page).replace("{1}",o.dataset.totalPages)),t){const r=d*(Number(e.page)-1);t.children[0].style.setProperty("--w-progress-width",`${r}%`)}if(e.trusted){const r=o.closest("section").querySelector('[data-id="w-carousel"]');u.scrollIntoView({behavior:"smooth",block:"nearest"}),u.dataset.active="true",r.dataset.paginated="true",setTimeout(()=>{r.removeAttribute("data-paginated")},300)}});document.addEventListener("astro:after-swap",p);p();
