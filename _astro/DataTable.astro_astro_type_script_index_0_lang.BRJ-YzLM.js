import{d as h}from"./debounce.DT8DhbJn.js";import{l as b,d as p}from"./event.C5jlCmtE.js";const g=()=>{const s=document.querySelectorAll('[data-id="w-data-table-filter"]'),i=document.querySelectorAll('[data-id="w-data-table-sort"]');Array.from(s).forEach(d=>{d.addEventListener("input",h(t=>{const c=t.target,n=c.dataset.filter,r=c.closest("section"),a=r?.querySelector("table"),m=r?.querySelector(".w-data-table-pagination"),f=a.querySelector("tfoot"),l=Array.from(a.querySelectorAll("tbody tr"));l.forEach(e=>{Array.from(e.querySelectorAll("td")).filter(y=>n?.includes(y.dataset.name||"")).map(y=>y.innerText).join("").toLowerCase().includes(c.value.toLowerCase())?e.removeAttribute("data-hidden"):e.dataset.hidden="true"});const o=Array.from(a?.querySelectorAll("tbody tr:not([data-hidden])"));o.length?f.dataset.hidden="true":f.removeAttribute("data-hidden"),a.dataset.itemsPerPage&&o.length>=Number(a.dataset.itemsPerPage)&&o.forEach((e,u)=>{u>=Number(a.dataset.itemsPerPage)&&(e.dataset.hidden="true")}),c.value?m.style.display="none":(m.style.display="flex",l.forEach(e=>{e.dataset.page!==a.dataset.page?e.dataset.hidden="true":e.removeAttribute("data-hidden")})),p("dataTableFilter",{results:o,numberOfResults:o.length})},400))}),Array.from(i).forEach(d=>{let t=1;d.addEventListener("click",c=>{const n=c.target,r=n.parentElement?.dataset.name,a=n.closest("section")?.querySelector("table"),m=a?.querySelector("tbody"),f=Array.from(a?.querySelectorAll("tbody tr")).sort((l,o)=>{let e=l.querySelector(`[data-name=${r}]`)?.innerText.replace(/\s/g,""),u=o.querySelector(`[data-name=${r}]`)?.innerText.replace(/\s/g,"");return isNaN(e)||(e=Number(e)),isNaN(u)||(u=Number(u)),e>u?t*-1:t}).map((l,o)=>(a?.dataset.page&&(l.dataset.page=`${Math.ceil((o+1)/Number(a.dataset.itemsPerPage))}`,l.dataset.page!==a.dataset.page?l.dataset.hidden="true":l.removeAttribute("data-hidden")),l));m?.replaceChildren(...f),t=t===1?-1:1})})};b("selectOnChange",s=>{const i=s.name.toLowerCase().replace(/\s/g,""),d=(document.querySelector(`[data-id="w-select-${s.select}"]`)?.closest("section")).querySelector("table");if(!d)return;const t=Array.from(d.querySelectorAll(`[data-name=${i}]`)),n=Array.from(s.list.children).find(r=>r.dataset.name===s.name).children[0];n.style.opacity=n.style.opacity==="0"?"1":"0",n.style.opacity==="0"?t.forEach(r=>r.dataset.hidden="true"):t.forEach(r=>r.removeAttribute("data-hidden"))});b("paginate",s=>{const i=s.target.closest("section").querySelector("table");if(!i)return;const d=Array.from(i.querySelectorAll("tbody tr"));i.dataset.page=s.page,d.forEach(t=>{Number(t.dataset.page)===s.page?t.removeAttribute("data-hidden"):t.dataset.hidden="true"})});document.addEventListener("astro:after-swap",g);g();
